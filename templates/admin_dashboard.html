<<<<<<< HEAD
{% extends "base.html" %}

{% block title %}Admin Dashboard - UPI Guard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <header class="dashboard-header">
        <div class="header-content">
            <h1>üõ°Ô∏è UPI Guard - Admin Panel</h1>
            <div class="user-info">
                <span>üë®‚Äçüíº Admin</span>
                <a href="{{ url_for('logout') }}" class="btn btn-sm btn-secondary">Logout</a>
            </div>
        </div>
    </header>

    <div class="dashboard-content">
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-details">
                    <h3>Total Users</h3>
                    <p class="stat-number">{{ stats['total_users'] }}</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üè™</div>
                <div class="stat-details">
                    <h3>Total Merchants</h3>
                    <p class="stat-number">{{ stats['total_merchants'] }}</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí≥</div>
                <div class="stat-details">
                    <h3>Total Transactions</h3>
                    <p class="stat-number">{{ stats['total_transactions'] }}</p>
                </div>
            </div>
            <div class="stat-card stat-card-danger">
                <div class="stat-icon">üö®</div>
                <div class="stat-details">
                    <h3>Fraud Detected</h3>
                    <p class="stat-number">{{ stats['fraud_count'] }}</p>
                </div>
            </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('transactions')">Transactions</button>
            <button class="tab-btn" onclick="showTab('fraud')">Fraud Logs</button>
            <button class="tab-btn" onclick="showTab('users')">Users</button>
            <button class="tab-btn" onclick="showTab('merchants')">Merchants</button>
        </div>

        <!-- Transactions Tab -->
        <div id="transactions-tab" class="tab-content active">
            <div class="dashboard-card">
                <h2>All Transactions</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>User</th>
                                <th>Merchant</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Fraud Risk</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if transactions %}
                                {% for txn in transactions %}
                                <tr class="{% if txn['is_fraud'] %}fraud-row{% endif %}">
                                    <td>{{ txn['transaction_id'] }}</td>
                                    <td>{{ txn['user_name'] }}</td>
                                    <td>{{ txn['merchant_name'] }}</td>
                                    <td>‚Çπ{{ "%.2f"|format(txn['amount']) }}</td>
                                    <td>
                                        {% if txn['status'] == 'completed' %}
                                            <span class="badge badge-success">Completed</span>
                                        {% elif txn['status'] == 'blocked' %}
                                            <span class="badge badge-danger">Blocked</span>
                                        {% else %}
                                            <span class="badge badge-warning">Pending</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if txn['fraud_probability'] %}
                                            <span class="{% if txn['fraud_probability'] > 0.5 %}fraud-high{% else %}fraud-low{% endif %}">
                                                {{ "%.1f"|format(txn['fraud_probability'] * 100) }}%
                                            </span>
                                        {% else %}
                                            N/A
                                        {% endif %}
                                    </td>
                                    <td>{{ txn['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="7" class="text-center">No transactions yet</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Fraud Logs Tab -->
        <div id="fraud-tab" class="tab-content">
            <div class="dashboard-card">
                <h2>Fraud Detection Logs</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>User</th>
                                <th>Merchant</th>
                                <th>Amount</th>
                                <th>Fraud Probability</th>
                                <th>Reason</th>
                                <th>Action</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if fraud_logs %}
                                {% for log in fraud_logs %}
                                <tr class="fraud-row">
                                    <td>{{ log['transaction_id'] }}</td>
                                    <td>{{ log['user_name'] or 'N/A' }}</td>
                                    <td>{{ log['merchant_name'] or 'N/A' }}</td>
                                    <td>‚Çπ{{ "%.2f"|format(log['amount']) }}</td>
                                    <td><span class="fraud-high">{{ "%.1f"|format(log['fraud_probability'] * 100) }}%</span></td>
                                    <td>{{ log['reason'] }}</td>
                                    <td><span class="badge badge-danger">{{ log['action_taken'] }}</span></td>
                                    <td>{{ log['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="8" class="text-center">No fraud detected yet</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="users-tab" class="tab-content">
            <div class="dashboard-card">
                <h2>All Users</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Mobile</th>
                                <th>UPI ID</th>
                                <th>Age</th>
                                <th>Registered</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if users %}
                                {% for user in users %}
                                <tr>
                                    <td>{{ user['id'] }}</td>
                                    <td>{{ user['name'] }}</td>
                                    <td>{{ user['mobile'] }}</td>
                                    <td>{{ user['upi_id'] }}</td>
                                    <td>{{ user['age'] }}</td>
                                    <td>{{ user['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="6" class="text-center">No users registered</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Merchants Tab -->
        <div id="merchants-tab" class="tab-content">
            <div class="dashboard-card">
                <h2>All Merchants</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Business Name</th>
                                <th>Mobile</th>
                                <th>UPI ID</th>
                                <th>Account Age</th>
                                <th>Registered</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if merchants %}
                                {% for merchant in merchants %}
                                <tr>
                                    <td>{{ merchant['id'] }}</td>
                                    <td>{{ merchant['business_name'] }}</td>
                                    <td>{{ merchant['mobile'] }}</td>
                                    <td>{{ merchant['upi_id'] }}</td>
                                    <td>{{ merchant['merchant_age'] }} days</td>
                                    <td>{{ merchant['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="6" class="text-center">No merchants registered</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function showTab(tabName) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(tabName + '-tab').classList.add('active');
    event.target.classList.add('active');
}
</script>
{% endblock %}
=======
{% extends "base.html" %}

{% block title %}Admin Dashboard - UPI Guard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <header class="dashboard-header">
        <div class="header-content">
            <h1>üõ°Ô∏è UPI Guard - Admin Panel</h1>
            <div class="user-info">
                <span>üë®‚Äçüíº Admin</span>
                <a href="{{ url_for('logout') }}" class="btn btn-sm btn-secondary">Logout</a>
            </div>
        </div>
    </header>

    <div class="dashboard-content">
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-details">
                    <h3>Total Users</h3>
                    <p class="stat-number">{{ stats['total_users'] }}</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üè™</div>
                <div class="stat-details">
                    <h3>Total Merchants</h3>
                    <p class="stat-number">{{ stats['total_merchants'] }}</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí≥</div>
                <div class="stat-details">
                    <h3>Total Transactions</h3>
                    <p class="stat-number">{{ stats['total_transactions'] }}</p>
                </div>
            </div>
            <div class="stat-card stat-card-danger">
                <div class="stat-icon">üö®</div>
                <div class="stat-details">
                    <h3>Fraud Detected</h3>
                    <p class="stat-number">{{ stats['fraud_count'] }}</p>
                </div>
            </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('transactions')">Transactions</button>
            <button class="tab-btn" onclick="showTab('fraud')">Fraud Logs</button>
            <button class="tab-btn" onclick="showTab('users')">Users</button>
            <button class="tab-btn" onclick="showTab('merchants')">Merchants</button>
        </div>

        <!-- Transactions Tab -->
        <div id="transactions-tab" class="tab-content active">
            <div class="dashboard-card">
                <h2>All Transactions</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>User</th>
                                <th>Merchant</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Fraud Risk</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if transactions %}
                                {% for txn in transactions %}
                                <tr class="{% if txn['is_fraud'] %}fraud-row{% endif %}">
                                    <td>{{ txn['transaction_id'] }}</td>
                                    <td>{{ txn['user_name'] }}</td>
                                    <td>{{ txn['merchant_name'] }}</td>
                                    <td>‚Çπ{{ "%.2f"|format(txn['amount']) }}</td>
                                    <td>
                                        {% if txn['status'] == 'completed' %}
                                            <span class="badge badge-success">Completed</span>
                                        {% elif txn['status'] == 'blocked' %}
                                            <span class="badge badge-danger">Blocked</span>
                                        {% else %}
                                            <span class="badge badge-warning">Pending</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if txn['fraud_probability'] %}
                                            <span class="{% if txn['fraud_probability'] > 0.5 %}fraud-high{% else %}fraud-low{% endif %}">
                                                {{ "%.1f"|format(txn['fraud_probability'] * 100) }}%
                                            </span>
                                        {% else %}
                                            N/A
                                        {% endif %}
                                    </td>
                                    <td>{{ txn['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="7" class="text-center">No transactions yet</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Fraud Logs Tab -->
        <div id="fraud-tab" class="tab-content">
            <div class="dashboard-card">
                <h2>Fraud Detection Logs</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>User</th>
                                <th>Merchant</th>
                                <th>Amount</th>
                                <th>Fraud Probability</th>
                                <th>Reason</th>
                                <th>Action</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if fraud_logs %}
                                {% for log in fraud_logs %}
                                <tr class="fraud-row">
                                    <td>{{ log['transaction_id'] }}</td>
                                    <td>{{ log['user_name'] or 'N/A' }}</td>
                                    <td>{{ log['merchant_name'] or 'N/A' }}</td>
                                    <td>‚Çπ{{ "%.2f"|format(log['amount']) }}</td>
                                    <td><span class="fraud-high">{{ "%.1f"|format(log['fraud_probability'] * 100) }}%</span></td>
                                    <td>{{ log['reason'] }}</td>
                                    <td><span class="badge badge-danger">{{ log['action_taken'] }}</span></td>
                                    <td>{{ log['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="8" class="text-center">No fraud detected yet</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="users-tab" class="tab-content">
            <div class="dashboard-card">
                <h2>All Users</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Mobile</th>
                                <th>UPI ID</th>
                                <th>Age</th>
                                <th>Registered</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if users %}
                                {% for user in users %}
                                <tr>
                                    <td>{{ user['id'] }}</td>
                                    <td>{{ user['name'] }}</td>
                                    <td>{{ user['mobile'] }}</td>
                                    <td>{{ user['upi_id'] }}</td>
                                    <td>{{ user['age'] }}</td>
                                    <td>{{ user['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="6" class="text-center">No users registered</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Merchants Tab -->
        <div id="merchants-tab" class="tab-content">
            <div class="dashboard-card">
                <h2>All Merchants</h2>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Business Name</th>
                                <th>Mobile</th>
                                <th>UPI ID</th>
                                <th>Account Age</th>
                                <th>Registered</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if merchants %}
                                {% for merchant in merchants %}
                                <tr>
                                    <td>{{ merchant['id'] }}</td>
                                    <td>{{ merchant['business_name'] }}</td>
                                    <td>{{ merchant['mobile'] }}</td>
                                    <td>{{ merchant['upi_id'] }}</td>
                                    <td>{{ merchant['merchant_age'] }} days</td>
                                    <td>{{ merchant['created_at'] }}</td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="6" class="text-center">No merchants registered</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function showTab(tabName) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(tabName + '-tab').classList.add('active');
    event.target.classList.add('active');
}
</script>
{% endblock %}
>>>>>>> a692c63 (initial commit)
